import{k as A,a7 as Y,a8 as G,h as P,r as V,V as L,W as y,X as b,a6 as c,f as o,a9 as W,a1 as _,aa as F,g as J,c as T,ab as X,q as Z,ac as ee,w as ae,U as x,Z as O,ad as le,Y as R,a0 as S,F as q,a2 as te,$,ae as oe}from"./index-D_PcHH1C.js";import{Q as ne,a as w,b as E,c as H,d as K,e as re,P as z,f as ie,g as ue,h as se,i as de,j as ce,k as me,l as N,_ as fe,m as pe,n as I}from"./QTable-BG0KHW9q.js";import{Q as ve}from"./QPage-_phrVUoH.js";import"./QItem-BOf3U6LN.js";const ge='<g transform="translate(-20,-20)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="90 50 50" to="0 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g><g transform="translate(20,20) rotate(15 50 50)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="90 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g>',be=A({name:"QSpinnerGears",props:Y,setup(a){const{cSize:f,classes:i}=G(a);return()=>P("svg",{class:i.value,width:f.value,height:f.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:ge})}}),ye={class:"row q-col-gutter-sm"},we={class:"col-12"},Ve={class:"col-12 col-md-4"},De={class:"col-12 col-md-4"},Ce={class:"col-12 col-md-4"},xe={class:"col-12 col-md-4"},_e={class:"col-12 col-md-4"},he={class:"col-12 col-md-4"},Se={class:"col-12 col-md-4"},Pe={class:"col-12 col-md-4"},ke={class:"col-12 col-md-4"},qe={class:"col-12"},Qe={class:"row justify-end q-gutter-sm"},Ue={__name:"ProductForm",emits:["dataUpdated"],setup(a,{emit:f}){const i=f,u=V(null),e=V({name:"",description:"",amount:"",code:Date.now(),category:"",price:"",brand:"",supplier:"",expirationDate:"",manufactureDate:"",currentDate:D()}),m=[{label:"Eletrônicos",value:"electronics"},{label:"Alimentos",value:"food"},{label:"Vestuário",value:"clothing"},{label:"Móveis",value:"furniture"},{label:"Outros",value:"others"}],v=()=>{try{const g={name:e.value.name,description:e.value.description,amount:e.value.amount,price:e.value.price,code:e.value.code,category:e.value.category,brand:e.value.brand,supplier:e.value.supplier,manufactureDate:e.value.manufactureDate,expirationDate:e.value.expirationDate,currentDate:e.value.currentDate};re("dataCompany",g),i("dataUpdated"),z.show({message:"Cadastrando produto...",spinner:be,spinnerColor:"white"}),F.create({color:"positive",textColor:"white",icon:"check_circle",message:"Produto cadastrado com sucesso!",position:"top",timeout:2e3}),p()}catch(g){F.create({color:"negative",textColor:"white",icon:"error",message:`Erro ao cadastrar produto: ${g.message}`,position:"top"})}finally{z.hide()}},p=()=>{e.value={name:"",description:"",amount:"",price:"",code:Date.now(),category:"",brand:"",supplier:"",expirationDate:"",manufactureDate:"",currentDate:D()},u.value&&u.value.focus()};function D(){const g=new Date,t=g.getFullYear(),l=String(g.getMonth()+1).padStart(2,"0"),h=String(g.getDate()).padStart(2,"0");return`${t}-${l}-${h}`}return(g,t)=>(y(),L(K,{class:"q-pa-md no-box-shadow no-border-radius"},{default:b(()=>[t[11]||(t[11]=c("div",{class:"text-h5 q-mb-md"},"Cadastro de Produtos no Estoque",-1)),o(ne,{onSubmit:W(v,["prevent"]),onReset:p,class:"q-gutter-md"},{default:b(()=>[c("div",ye,[c("div",we,[o(w,{modelValue:e.value.name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.name=l),label:"Nome do Produto *",filled:"",rules:[l=>!!l||"Nome é obrigatório"],ref_key:"nameRef",ref:u},null,8,["modelValue","rules"])]),c("div",Ve,[o(w,{modelValue:e.value.code,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.code=l),label:"Código ",filled:"",disable:"",readonly:""},null,8,["modelValue"])]),c("div",De,[o(w,{modelValue:e.value.amount,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.amount=l),modelModifiers:{number:!0},label:"Quantidade *",type:"number",filled:"",rules:[l=>l!=null||"Quantidade é obrigatória",l=>l>=1||"Quantidade deve ser maior ou igual a 1"]},null,8,["modelValue","rules"])]),c("div",Ce,[o(w,{modelValue:e.value.price,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.price=l),modelModifiers:{number:!0},label:"Preço *",type:"number",filled:"",prefix:"R$",rules:[l=>l!=null||"Valor é obrigatório",l=>l>0||"Valor deve ser maior que 0"]},null,8,["modelValue","rules"])]),c("div",xe,[o(E,{modelValue:e.value.category,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.category=l),options:m,label:"Categoria *",filled:"","emit-value":"","map-options":"",rules:[l=>!!l||"Categoria é obrigatória"]},null,8,["modelValue","rules"])]),c("div",_e,[o(w,{modelValue:e.value.brand,"onUpdate:modelValue":t[5]||(t[5]=l=>e.value.brand=l),label:"Marca",filled:""},null,8,["modelValue"])]),c("div",he,[o(w,{modelValue:e.value.supplier,"onUpdate:modelValue":t[6]||(t[6]=l=>e.value.supplier=l),label:"Fornecedor",filled:""},null,8,["modelValue"])]),c("div",Se,[o(w,{modelValue:e.value.currentDate,"onUpdate:modelValue":t[7]||(t[7]=l=>e.value.currentDate=l),type:"date",label:"Data do Cadastro",filled:"",disable:"",readonly:""},null,8,["modelValue"])]),c("div",Pe,[o(w,{modelValue:e.value.manufactureDate,"onUpdate:modelValue":t[8]||(t[8]=l=>e.value.manufactureDate=l),label:"Data de Fabricação",type:"date",filled:"",rules:[l=>!l||!g.expirationDate||new Date(l)<new Date(g.expirationDate)||"Data de fabricação deve ser anterior à data de validade"]},null,8,["modelValue","rules"])]),c("div",ke,[o(w,{modelValue:e.value.expirationDate,"onUpdate:modelValue":t[9]||(t[9]=l=>e.value.expirationDate=l),label:"Data de Validade",type:"date",filled:""},null,8,["modelValue"])]),c("div",qe,[o(w,{modelValue:e.value.description,"onUpdate:modelValue":t[10]||(t[10]=l=>e.value.description=l),label:"Descrição",type:"textarea",filled:"",autogrow:""},null,8,["modelValue"])])]),o(H,{class:"q-my-md"}),c("div",Qe,[o(_,{label:"Limpar",type:"reset",color:"grey-7",flat:"",icon:"clear_all"}),o(_,{label:"Salvar",type:"submit",color:"primary",icon:"save"})])]),_:1})]),_:1}))}};function Q(a,f=new WeakMap){if(Object(a)!==a)return a;if(f.has(a))return f.get(a);const i=a instanceof Date?new Date(a):a instanceof RegExp?new RegExp(a.source,a.flags):a instanceof Set?new Set:a instanceof Map?new Map:typeof a.constructor!="function"?Object.create(null):a.prototype!==void 0&&typeof a.prototype.constructor=="function"?a:new a.constructor;if(typeof a.constructor=="function"&&typeof a.valueOf=="function"){const u=a.valueOf();if(Object(u)!==u){const e=new a.constructor(u);return f.set(a,e),e}}return f.set(a,i),a instanceof Set?a.forEach(u=>{i.add(Q(u,f))}):a instanceof Map&&a.forEach((u,e)=>{i.set(e,Q(u,f))}),Object.assign(i,...Object.keys(a).map(u=>({[u]:Q(a[u],f)})))}const Me=A({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(a,{slots:f,emit:i}){const{proxy:u}=J(),{$q:e}=u,m=V(null),v=V(""),p=V("");let D=!1;const g=T(()=>X({initialValue:v.value,validate:a.validate,set:t,cancel:l,updatePosition:h},"value",()=>p.value,n=>{p.value=n}));function t(){a.validate(p.value)!==!1&&(k()===!0&&(i("save",p.value,v.value),i("update:modelValue",p.value)),U())}function l(){k()===!0&&i("cancel",p.value,v.value),U()}function h(){Z(()=>{m.value.updatePosition()})}function k(){return ee(p.value,v.value)===!1}function U(){D=!0,m.value.hide()}function B(){D=!1,v.value=Q(a.modelValue),p.value=Q(a.modelValue),i("beforeShow")}function j(){i("show")}function s(){D===!1&&k()===!0&&(a.autoSave===!0&&a.validate(p.value)===!0?(i("save",p.value,v.value),i("update:modelValue",p.value)):i("cancel",p.value,v.value)),i("beforeHide")}function d(){i("hide")}function r(){const n=f.default!==void 0?[].concat(f.default(g.value)):[];return a.title&&n.unshift(P("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},a.title)),a.buttons===!0&&n.push(P("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[P(_,{flat:!0,color:a.color,label:a.labelCancel||e.lang.label.cancel,onClick:l}),P(_,{flat:!0,color:a.color,label:a.labelSet||e.lang.label.set,onClick:t})])),n}return Object.assign(u,{set:t,cancel:l,show(n){m.value?.show(n)},hide(n){m.value?.hide(n)},updatePosition:h}),()=>{if(a.disable!==!0)return P(ie,{ref:m,class:"q-popup-edit",cover:a.cover,onBeforeShow:B,onShow:j,onBeforeHide:s,onHide:d,onEscapeKey:l},r)}}}),$e={class:"row justify-between items-center q-mb-md"},Le={key:0,title:"Clique para editar"},Be={key:1},je={key:2},Oe={class:"full-width row flex-center text-accent q-gutter-sm"},Te={class:"row items-center justify-between full-width"},Ee={__name:"ProductTable",props:{rows:{type:Array,required:!0}},setup(a){const f=a,i=V(!1),u=V(""),e=V({sortBy:"name",descending:!1,page:1,rowsPerPage:10}),m=T(()=>u.value?t.value.filter(s=>Object.values(s).some(d=>String(d).toLowerCase().includes(u.value.toLowerCase()))).length:t.value.length),v=[{name:"id",label:"ID",field:"id",align:"left"},{name:"code",label:"Código",field:"code",align:"left"},{name:"name",label:"Nome",field:"name",align:"left"},{name:"price",label:"Preço",field:"price",align:"right"},{name:"description",label:"Descrição",field:"description",align:"left"},{name:"amount",label:"Quantidade",field:"amount",align:"right"},{name:"category",label:"Categoria",field:"category",align:"left"},{name:"brand",label:"Marca",field:"brand",align:"left"},{name:"supplier",label:"Fornecedor",field:"supplier",align:"left"},{name:"expirationDate",label:"Data Validade",field:"expirationDate",align:"left"},{name:"manufactureDate",label:"Data Fabricação",field:"manufactureDate",align:"left"},{name:"currentDate",label:"Data Cadastro",field:"currentDate",align:"left"},{name:"actions",label:"Ações",field:"actions",align:"center"}],p=v.map(s=>({label:s.label,value:s.name})),D=V(["id","name","description","amount","price","code","category","brand","supplier","expirationDate","manufactureDate","currentDate","actions"]),g=T(()=>v.filter(s=>D.value.includes(s.name))),t=V([]);ae(()=>f.rows,s=>{i.value=!0,t.value=s,setTimeout(()=>{i.value=!1},200)},{immediate:!0});const l=s=>s==="manufactureDate"||s==="expirationDate",h=s=>{if(!s)return"";try{return new Date(s).toLocaleDateString("pt-BR")}catch{return s}},k=[{label:"Eletrônicos",value:"electronics"},{label:"Alimentos",value:"food"},{label:"Vestuário",value:"clothing"},{label:"Móveis",value:"furniture"},{label:"Outros",value:"others"}],U=s=>{const d=k.find(r=>r.value===s);return d?d.label:s},B=(s,d,r,n)=>{const C=t.value.findIndex(M=>M.id===s);C!==-1&&(t.value[C][d]=r,d==="price"&&(t.value[C].value=r),localStorage.setItem("dataCompany",JSON.stringify(t.value)),n.set())},j=(s,d)=>{me(s,d),t.value=N("dataCompany")};return(s,d)=>(y(),x("div",null,[c("div",$e,[o(w,{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=r=>u.value=r),dense:"",placeholder:"Buscar...",class:"q-ml-md",style:{width:"200px"}},{append:b(()=>[o(O,{name:"search"})]),_:1},8,["modelValue"]),o(E,{modelValue:D.value,"onUpdate:modelValue":d[1]||(d[1]=r=>D.value=r),multiple:"",options:le(p),label:"Colunas Visíveis",style:{"min-width":"200px"},dense:"","options-dense":"","emit-value":"","map-options":"","display-value":D.value.length?"Colunas selecionadas":""},null,8,["modelValue","options","display-value"])]),o(ce,{rows:t.value,columns:g.value,"row-key":"id",filter:u.value,pagination:e.value,"onUpdate:pagination":d[4]||(d[4]=r=>e.value=r),loading:i.value,bordered:!0,dense:!0},{body:b(r=>[o(se,{props:r},{default:b(()=>[(y(!0),x(q,null,te(g.value,n=>(y(),L(de,{key:n.name,props:r},{default:b(()=>[n.name!=="id"&&n.name!=="actions"?(y(),x("div",Le,[n.name==="price"||n.name==="value"?(y(),x(q,{key:0},[$(" R$ "+S(Number(r.row[n.field]).toFixed(2)),1)],64)):l(n.name)?(y(),x(q,{key:1},[$(S(h(r.row[n.field])),1)],64)):n.name==="category"?(y(),x(q,{key:2},[$(S(U(r.row[n.field])),1)],64)):(y(),x(q,{key:3},[$(S(r.row[n.field]),1)],64)),o(Me,{modelValue:r.row[n.field],"onUpdate:modelValue":C=>r.row[n.field]=C},{default:b(C=>[o(w,{modelValue:C.value,"onUpdate:modelValue":M=>C.value=M,dense:"",autofocus:"",counter:"",onKeyup:oe(M=>B(r.row.id,n.field,C.value,C),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])):n.name==="id"?(y(),x("div",Be,S(r.row[n.field]),1)):n.name==="actions"?(y(),x("div",je,[o(_,{color:"negative",label:"Excluir",dense:"",onClick:C=>j("dataCompany",r.row.id)},null,8,["onClick"])])):R("",!0)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":b(({icon:r,filter:n})=>[c("div",Oe,[o(O,{size:"2em",name:"sentiment_dissatisfied"}),d[5]||(d[5]=c("span",null," Bem, isso é triste... Não há dados disponíveis ",-1)),o(O,{size:"2em",name:n?"filter_b_and_w":r},null,8,["name"])])]),bottom:b(()=>[c("div",Te,[c("div",null,"Total de produtos: "+S(t.value.length),1),t.value.length>e.value.rowsPerPage?(y(),L(ue,{key:0,modelValue:e.value.page,"onUpdate:modelValue":d[2]||(d[2]=r=>e.value.page=r),max:Math.ceil(m.value/e.value.rowsPerPage),"direction-links":!0,"boundary-links":!0,color:"primary",size:"sm"},null,8,["modelValue","max"])):R("",!0),o(E,{modelValue:e.value.rowsPerPage,"onUpdate:modelValue":d[3]||(d[3]=r=>e.value.rowsPerPage=r),options:[5,10,20,50,100],label:"Por página",dense:"","options-dense":"","emit-value":"","map-options":"",style:{"min-width":"120px"}},null,8,["modelValue"])])]),_:1},8,["rows","columns","filter","pagination","loading"])]))}},Ne={class:"row q-gutter-xl items-start justify-center"},Fe={style:{width:"300px"}},Re={style:{flex:"1"}},Ke={__name:"ProductPage",setup(a){const f=V(N("dataCompany")),i=V(!1),u=()=>{f.value=N("dataCompany")};return(e,m)=>(y(),L(ve,{padding:"",class:"product-page"},{default:b(()=>[c("div",Ne,[c("div",Fe,[m[3]||(m[3]=c("img",{alt:"DsBrito-logo",src:fe,style:{width:"100%"}},null,-1)),m[4]||(m[4]=c("div",{class:"text-subtitle2 q-mb-sm"},"Verifique aqui os produtos cadastrados:",-1)),o(_,{label:"Tabela de Produtos Cadastrados",color:"primary",onClick:m[0]||(m[0]=v=>i.value=!0),class:"bg-secondary full-width"})]),c("div",Re,[o(Ue,{onDataUpdated:u})])]),o(pe,{modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=v=>i.value=v),"full-width":""},{default:b(()=>[o(K,{style:{"max-width":"900px",width:"100%"}},{default:b(()=>[o(I,{class:"row items-center justify-between"},{default:b(()=>[m[5]||(m[5]=c("div",{class:"text-h6"},"Produtos Cadastrados",-1)),o(_,{flat:"",icon:"close",round:"",dense:"",onClick:m[1]||(m[1]=v=>i.value=!1)})]),_:1}),o(H),o(I,null,{default:b(()=>[o(Ee,{rows:f.value},null,8,["rows"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ke as default};
