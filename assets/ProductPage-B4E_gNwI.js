import{k as H,a7 as W,a8 as Y,h,r as V,V as L,W as w,X as g,a5 as c,f as t,a9 as J,a1 as x,g as X,c as T,aa as Z,q as ee,ab as ae,w as le,U as C,Z as O,ac as te,Y as R,a0 as P,F as q,a2 as oe,$,ad as ne}from"./index-BKbFlLN1.js";import{Q as re,a as K,P as F,b as ue,c as se,d as ie,e as de,_ as ce,f as z}from"./QTable-C-ogjud7.js";import{Q as y,a as j,b as G,c as me,d as fe}from"./QLinearProgress-qCJtwm1t.js";import{g as I,a as ve,s as A,d as pe,b as N,Q as be}from"./product-storage-B3qwsH1N.js";import"./QItem-DJSbFHKz.js";import"./QList-DnC_qoR9.js";const ge='<g transform="translate(-20,-20)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="90 50 50" to="0 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g><g transform="translate(20,20) rotate(15 50 50)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="90 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g>',we=H({name:"QSpinnerGears",props:W,setup(l){const{cSize:f,classes:u}=Y(l);return()=>h("svg",{class:u.value,width:f.value,height:f.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:ge})}}),ye={class:"row q-col-gutter-sm"},Ve={class:"col-12"},De={class:"col-12 col-md-4"},Ce={class:"col-12 col-md-4"},xe={class:"col-12 col-md-4"},_e={class:"col-12 col-md-4"},Pe={class:"col-12 col-md-4"},he={class:"col-12 col-md-4"},Se={class:"col-12 col-md-4"},qe={class:"col-12 col-md-4"},Qe={class:"col-12 col-md-4"},ke={class:"col-12"},Ue={class:"row justify-end q-gutter-sm"},Me={__name:"ProductForm",emits:["dataUpdated"],setup(l,{emit:f}){const u=f,s=V(null),a=V({name:"",description:"",amount:"",code:Date.now(),category:"",price:"",brand:"",supplier:"",expirationDate:"",manufactureDate:"",currentDate:I()}),m=[{label:"Eletrônicos",value:"electronics"},{label:"Alimentos",value:"food"},{label:"Vestuário",value:"clothing"},{label:"Móveis",value:"furniture"},{label:"Outros",value:"others"}],p=()=>{try{const b={name:a.value.name,description:a.value.description,amount:a.value.amount,price:a.value.price,code:a.value.code,category:a.value.category,brand:a.value.brand,supplier:a.value.supplier,manufactureDate:a.value.manufactureDate,expirationDate:a.value.expirationDate,currentDate:a.value.currentDate};ve("dataProducts",b),u("dataUpdated"),F.show({message:"Cadastrando produto...",spinner:we,spinnerColor:"white"}),A("positive","Produto cadastrado com sucesso!"),v()}catch(b){console.log("Erro ao cadastrar produto:",b),A("negative","Erro ao cadastrar produto!")}finally{F.hide()}},v=()=>{a.value={name:"",description:"",amount:"",price:"",code:Date.now(),category:"",brand:"",supplier:"",expirationDate:"",manufactureDate:"",currentDate:I()},s.value&&s.value.focus()};return(b,r)=>(w(),L(G,{class:"q-pa-md no-box-shadow no-border-radius"},{default:g(()=>[r[11]||(r[11]=c("div",{class:"text-h5 q-mb-md"},"Cadastro de Produtos no Estoque",-1)),t(re,{onSubmit:J(p,["prevent"]),onReset:v,class:"q-gutter-md"},{default:g(()=>[c("div",ye,[c("div",Ve,[t(y,{modelValue:a.value.name,"onUpdate:modelValue":r[0]||(r[0]=e=>a.value.name=e),label:"Nome do Produto *",filled:"",rules:[e=>!!e||"Nome é obrigatório"],ref_key:"nameRef",ref:s},null,8,["modelValue","rules"])]),c("div",De,[t(y,{modelValue:a.value.code,"onUpdate:modelValue":r[1]||(r[1]=e=>a.value.code=e),label:"Código ",filled:"",disable:"",readonly:""},null,8,["modelValue"])]),c("div",Ce,[t(y,{modelValue:a.value.amount,"onUpdate:modelValue":r[2]||(r[2]=e=>a.value.amount=e),modelModifiers:{number:!0},label:"Quantidade *",type:"number",filled:"",rules:[e=>e!=null||"Quantidade é obrigatória",e=>e>=1||"Quantidade deve ser maior ou igual a 1"]},null,8,["modelValue","rules"])]),c("div",xe,[t(y,{modelValue:a.value.price,"onUpdate:modelValue":r[3]||(r[3]=e=>a.value.price=e),modelModifiers:{number:!0},label:"Preço *",type:"number",filled:"",prefix:"R$",rules:[e=>e!=null||"Valor é obrigatório",e=>e>0||"Valor deve ser maior que 0"]},null,8,["modelValue","rules"])]),c("div",_e,[t(j,{modelValue:a.value.category,"onUpdate:modelValue":r[4]||(r[4]=e=>a.value.category=e),options:m,label:"Categoria *",filled:"","emit-value":"","map-options":"",rules:[e=>!!e||"Categoria é obrigatória"]},null,8,["modelValue","rules"])]),c("div",Pe,[t(y,{modelValue:a.value.brand,"onUpdate:modelValue":r[5]||(r[5]=e=>a.value.brand=e),label:"Marca",filled:""},null,8,["modelValue"])]),c("div",he,[t(y,{modelValue:a.value.supplier,"onUpdate:modelValue":r[6]||(r[6]=e=>a.value.supplier=e),label:"Fornecedor",filled:""},null,8,["modelValue"])]),c("div",Se,[t(y,{modelValue:a.value.currentDate,"onUpdate:modelValue":r[7]||(r[7]=e=>a.value.currentDate=e),type:"date",label:"Data do Cadastro",filled:"",disable:"",readonly:""},null,8,["modelValue"])]),c("div",qe,[t(y,{modelValue:a.value.manufactureDate,"onUpdate:modelValue":r[8]||(r[8]=e=>a.value.manufactureDate=e),label:"Data de Fabricação",type:"date",filled:"",rules:[e=>!e||!b.expirationDate||new Date(e)<new Date(b.expirationDate)||"Data de fabricação deve ser anterior à data de validade"]},null,8,["modelValue","rules"])]),c("div",Qe,[t(y,{modelValue:a.value.expirationDate,"onUpdate:modelValue":r[9]||(r[9]=e=>a.value.expirationDate=e),label:"Data de Validade",type:"date",filled:""},null,8,["modelValue"])]),c("div",ke,[t(y,{modelValue:a.value.description,"onUpdate:modelValue":r[10]||(r[10]=e=>a.value.description=e),label:"Descrição",type:"textarea",filled:"",autogrow:""},null,8,["modelValue"])])]),t(K,{class:"q-my-md"}),c("div",Ue,[t(x,{label:"Limpar",type:"reset",color:"grey-7",flat:"",icon:"clear_all"}),t(x,{label:"Salvar",type:"submit",color:"primary",icon:"save"})])]),_:1})]),_:1}))}};function Q(l,f=new WeakMap){if(Object(l)!==l)return l;if(f.has(l))return f.get(l);const u=l instanceof Date?new Date(l):l instanceof RegExp?new RegExp(l.source,l.flags):l instanceof Set?new Set:l instanceof Map?new Map:typeof l.constructor!="function"?Object.create(null):l.prototype!==void 0&&typeof l.prototype.constructor=="function"?l:new l.constructor;if(typeof l.constructor=="function"&&typeof l.valueOf=="function"){const s=l.valueOf();if(Object(s)!==s){const a=new l.constructor(s);return f.set(l,a),a}}return f.set(l,u),l instanceof Set?l.forEach(s=>{u.add(Q(s,f))}):l instanceof Map&&l.forEach((s,a)=>{u.set(a,Q(s,f))}),Object.assign(u,...Object.keys(l).map(s=>({[s]:Q(l[s],f)})))}const $e=H({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(l,{slots:f,emit:u}){const{proxy:s}=X(),{$q:a}=s,m=V(null),p=V(""),v=V("");let b=!1;const r=T(()=>Z({initialValue:p.value,validate:l.validate,set:e,cancel:_,updatePosition:k},"value",()=>v.value,o=>{v.value=o}));function e(){l.validate(v.value)!==!1&&(S()===!0&&(u("save",v.value,p.value),u("update:modelValue",v.value)),U())}function _(){S()===!0&&u("cancel",v.value,p.value),U()}function k(){ee(()=>{m.value.updatePosition()})}function S(){return ae(v.value,p.value)===!1}function U(){b=!0,m.value.hide()}function B(){b=!1,p.value=Q(l.modelValue),v.value=Q(l.modelValue),u("beforeShow")}function E(){u("show")}function i(){b===!1&&S()===!0&&(l.autoSave===!0&&l.validate(v.value)===!0?(u("save",v.value,p.value),u("update:modelValue",v.value)):u("cancel",v.value,p.value)),u("beforeHide")}function d(){u("hide")}function n(){const o=f.default!==void 0?[].concat(f.default(r.value)):[];return l.title&&o.unshift(h("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},l.title)),l.buttons===!0&&o.push(h("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[h(x,{flat:!0,color:l.color,label:l.labelCancel||a.lang.label.cancel,onClick:_}),h(x,{flat:!0,color:l.color,label:l.labelSet||a.lang.label.set,onClick:e})])),o}return Object.assign(s,{set:e,cancel:_,show(o){m.value?.show(o)},hide(o){m.value?.hide(o)},updatePosition:k}),()=>{if(l.disable!==!0)return h(me,{ref:m,class:"q-popup-edit",cover:l.cover,onBeforeShow:B,onShow:E,onBeforeHide:i,onHide:d,onEscapeKey:_},n)}}}),Le={class:"row justify-between items-center q-mb-md"},Be={key:0,title:"Clique para editar"},Ee={key:1},Oe={key:2},Te={class:"full-width row flex-center text-accent q-gutter-sm"},je={class:"row items-center justify-between full-width"},Ne={__name:"ProductTable",props:{rows:{type:Array,required:!0}},setup(l){const f=l,u=V(!1),s=V(""),a=V({sortBy:"name",descending:!1,page:1,rowsPerPage:10}),m=T(()=>s.value?e.value.filter(i=>Object.values(i).some(d=>String(d).toLowerCase().includes(s.value.toLowerCase()))).length:e.value.length),p=[{name:"id",label:"ID",field:"id",align:"left"},{name:"code",label:"Código",field:"code",align:"left"},{name:"name",label:"Nome",field:"name",align:"left"},{name:"price",label:"Preço",field:"price",align:"right"},{name:"description",label:"Descrição",field:"description",align:"left"},{name:"amount",label:"Quantidade",field:"amount",align:"right"},{name:"category",label:"Categoria",field:"category",align:"left"},{name:"brand",label:"Marca",field:"brand",align:"left"},{name:"supplier",label:"Fornecedor",field:"supplier",align:"left"},{name:"expirationDate",label:"Data Validade",field:"expirationDate",align:"left"},{name:"manufactureDate",label:"Data Fabricação",field:"manufactureDate",align:"left"},{name:"currentDate",label:"Data Cadastro",field:"currentDate",align:"left"},{name:"actions",label:"Ações",field:"actions",align:"center"}],v=p.map(i=>({label:i.label,value:i.name})),b=V(["id","name","description","amount","price","code","category","brand","supplier","expirationDate","manufactureDate","currentDate","actions"]),r=T(()=>p.filter(i=>b.value.includes(i.name))),e=V([]);le(()=>f.rows,i=>{u.value=!0,e.value=i,setTimeout(()=>{u.value=!1},200)},{immediate:!0});const _=i=>i==="manufactureDate"||i==="expirationDate",k=i=>{if(!i)return"";try{return new Date(i).toLocaleDateString("pt-BR")}catch{return i}},S=[{label:"Eletrônicos",value:"electronics"},{label:"Alimentos",value:"food"},{label:"Vestuário",value:"clothing"},{label:"Móveis",value:"furniture"},{label:"Outros",value:"others"}],U=i=>{const d=S.find(n=>n.value===i);return d?d.label:i},B=(i,d,n,o)=>{const D=e.value.findIndex(M=>M.id===i);D!==-1&&(e.value[D][d]=n,d==="price"&&(e.value[D].value=n),localStorage.setItem("dataProducts",JSON.stringify(e.value)),o.set())},E=(i,d)=>{pe(i,d),e.value=N("dataProducts")};return(i,d)=>(w(),C("div",null,[c("div",Le,[t(y,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=n=>s.value=n),dense:"",placeholder:"Buscar...",class:"q-ml-md",style:{width:"200px"}},{append:g(()=>[t(O,{name:"search"})]),_:1},8,["modelValue"]),t(j,{modelValue:b.value,"onUpdate:modelValue":d[1]||(d[1]=n=>b.value=n),multiple:"",options:te(v),label:"Colunas Visíveis",style:{"min-width":"200px"},dense:"","options-dense":"","emit-value":"","map-options":"","display-value":b.value.length?"Colunas selecionadas":""},null,8,["modelValue","options","display-value"])]),t(de,{rows:e.value,columns:r.value,"row-key":"id",filter:s.value,pagination:a.value,"onUpdate:pagination":d[4]||(d[4]=n=>a.value=n),loading:u.value,bordered:!0,dense:!0},{body:g(n=>[t(se,{props:n},{default:g(()=>[(w(!0),C(q,null,oe(r.value,o=>(w(),L(ie,{key:o.name,props:n},{default:g(()=>[o.name!=="id"&&o.name!=="actions"?(w(),C("div",Be,[o.name==="price"||o.name==="value"?(w(),C(q,{key:0},[$(" R$ "+P(Number(n.row[o.field]).toFixed(2)),1)],64)):_(o.name)?(w(),C(q,{key:1},[$(P(k(n.row[o.field])),1)],64)):o.name==="category"?(w(),C(q,{key:2},[$(P(U(n.row[o.field])),1)],64)):(w(),C(q,{key:3},[$(P(n.row[o.field]),1)],64)),t($e,{modelValue:n.row[o.field],"onUpdate:modelValue":D=>n.row[o.field]=D},{default:g(D=>[t(y,{modelValue:D.value,"onUpdate:modelValue":M=>D.value=M,dense:"",autofocus:"",counter:"",onKeyup:ne(M=>B(n.row.id,o.field,D.value,D),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])):o.name==="id"?(w(),C("div",Ee,P(n.row[o.field]),1)):o.name==="actions"?(w(),C("div",Oe,[t(x,{color:"negative",label:"Excluir",dense:"",onClick:D=>E("dataProducts",n.row.id)},null,8,["onClick"])])):R("",!0)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"no-data":g(({icon:n,filter:o})=>[c("div",Te,[t(O,{size:"2em",name:"sentiment_dissatisfied"}),d[5]||(d[5]=c("span",null," Bem, isso é triste... Não há dados disponíveis ",-1)),t(O,{size:"2em",name:o?"filter_b_and_w":n},null,8,["name"])])]),bottom:g(()=>[c("div",je,[c("div",null,"Total de produtos: "+P(e.value.length),1),e.value.length>a.value.rowsPerPage?(w(),L(ue,{key:0,modelValue:a.value.page,"onUpdate:modelValue":d[2]||(d[2]=n=>a.value.page=n),max:Math.ceil(m.value/a.value.rowsPerPage),"direction-links":!0,"boundary-links":!0,color:"primary",size:"sm"},null,8,["modelValue","max"])):R("",!0),t(j,{modelValue:a.value.rowsPerPage,"onUpdate:modelValue":d[3]||(d[3]=n=>a.value.rowsPerPage=n),options:[5,10,20,50,100],label:"Por página",dense:"","options-dense":"","emit-value":"","map-options":"",style:{"min-width":"120px"}},null,8,["modelValue"])])]),_:1},8,["rows","columns","filter","pagination","loading"])]))}},Re={class:"row q-gutter-xl items-start justify-center"},Fe={style:{width:"300px"}},ze={style:{flex:"1"}},Ye={__name:"ProductPage",setup(l){const f=V(N("dataProducts")),u=V(!1),s=()=>{f.value=N("dataProducts")};return(a,m)=>(w(),L(be,{padding:"",class:"product-page"},{default:g(()=>[c("div",Re,[c("div",Fe,[m[3]||(m[3]=c("img",{alt:"DsBrito-logo",src:ce,style:{width:"100%"}},null,-1)),m[4]||(m[4]=c("div",{class:"text-subtitle2 q-mb-sm"},"Verifique aqui os produtos cadastrados:",-1)),t(x,{label:"Tabela de Produtos Cadastrados",color:"primary",onClick:m[0]||(m[0]=p=>u.value=!0),class:"bg-secondary full-width"})]),c("div",ze,[t(Me,{onDataUpdated:s})])]),t(fe,{modelValue:u.value,"onUpdate:modelValue":m[2]||(m[2]=p=>u.value=p),"full-width":""},{default:g(()=>[t(G,{style:{"max-width":"900px",width:"100%"}},{default:g(()=>[t(z,{class:"row items-center justify-between"},{default:g(()=>[m[5]||(m[5]=c("div",{class:"text-h6"},"Produtos Cadastrados",-1)),t(x,{flat:"",icon:"close",round:"",dense:"",onClick:m[1]||(m[1]=p=>u.value=!1)})]),_:1}),t(K),t(z,null,{default:g(()=>[t(Ne,{rows:f.value},null,8,["rows"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ye as default};
